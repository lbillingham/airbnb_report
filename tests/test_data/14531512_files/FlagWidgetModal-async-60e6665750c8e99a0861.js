!function(){var e=webpackJsonp([63],{ZKsZ:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var l=a("igBp"),r=babelHelpers.interopRequireDefault(l),n=a("E7Qp"),s=babelHelpers.interopRequireDefault(n),o=function(){function e(){babelHelpers.classCallCheck(this,e),this.generateActions("createFlagSuccess","flagUndoComplete")}return babelHelpers.createClass(e,[{key:"createFlag",value:function(){function e(e){var t=this;s.default.createFlag(e).then(function(a){var l=a.flag_id;return t.actions.createFlagSuccess({flagId:l||e.flagId,flaggableId:e.flaggableId})})}return e}()},{key:"undoFlag",value:function(){function e(e){var t=this,a=e.flagId,l=e.postId;s.default.undoFlag(a).then(function(e){return t.actions.flagUndoComplete({success:e.success,postId:l})})}return e}()}]),e}();o.displayName="FlagWidgetModalActions",t.default=r.default.createActions(o),e.exports=t.default},"ftk/":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.FLAGGABLE_TYPES=void 0;var l=a("yu5W"),r=babelHelpers.interopRequireDefault(l),n=a("Jmof"),s=babelHelpers.interopRequireDefault(n),o=a("wLXD"),i=babelHelpers.interopRequireDefault(o),u=a("kUb7"),f=babelHelpers.interopRequireDefault(u),d=a("M/w6"),c=babelHelpers.interopRequireDefault(d),p=a("C7vi"),m=babelHelpers.interopRequireDefault(p),g=a("MW7Y"),h=babelHelpers.interopRequireDefault(g),b=a("WXu/"),_=babelHelpers.interopRequireDefault(b),E=a("ZKsZ"),k=babelHelpers.interopRequireDefault(E),v=a("5W78"),y=babelHelpers.interopRequireDefault(v),C=t.FLAGGABLE_TYPES={USER:"user",LISTING:"listing",MESSAGE:"message",REVIEW:"review",ARTICLE:"article",ARTICLE_COMMENT:"article_comment"},O={flaggableType:r.default.oneOf(Object.values(C)).isRequired,flagOptions:r.default.object.isRequired,visible:r.default.bool.isRequired,createFlagUrl:r.default.string.isRequired,flaggableId:r.default.number,onClose:r.default.func,flagId:r.default.number,resetOnClose:r.default.bool},I={resetOnClose:!1},N=function(e){function t(e){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onItemClick=a.onItemClick.bind(a),a.onOtherClick=a.onOtherClick.bind(a),a.onConfirmationClose=a.onConfirmationClose.bind(a),a.renderFlagOption=a.renderFlagOption.bind(a),a.state={showConfirmation:!1,showOtherFields:!1},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onConfirmationClose",value:function(){function e(){this.props.onClose(),this.props.resetOnClose&&this.setState({showConfirmation:!1,showOtherFields:!1})}return e}()},{key:"onItemClick",value:function(){function e(e){var t=e.target.getAttribute("data-reason-id"),a=void 0;("Other"!==t||(a=i.default.findDOMNode(this.refs.otherReasonTextarea).value,a.trim()))&&(k.default.createFlag({url:this.props.createFlagUrl,flaggableType:this.props.flaggableType,flaggableId:this.props.flaggableId,flagName:t,flagId:this.props.flagId,otherReason:a}),this.setState({showConfirmation:!0}),e&&e.preventDefault())}return e}()},{key:"onOtherClick",value:function(){function e(){this.setState({showOtherFields:!0})}return e}()},{key:"renderThankYou",value:function(){function e(){switch(this.props.flaggableType){case C.USER:return s.default.createElement(f.default,{k:"thank_you_for_reporting_this_user"});case C.LISTING:return s.default.createElement(f.default,{k:"thank_you_for_reporting_this_listing"});case C.MESSAGE:return s.default.createElement(f.default,{k:"thank_you_for_reporting_this_message"});default:return""}}return e}()},{key:"renderConfirmation",value:function(){function e(){return s.default.createElement("div",null,s.default.createElement("div",{className:"panel-header thanks-header"},s.default.createElement(f.default,{k:"flag_widget_thank_you"})),s.default.createElement("div",{className:"panel-body flag-thank-you"},s.default.createElement("p",null,this.renderThankYou()," ",s.default.createElement(f.default,{k:"your_participation_helps_and_we_appreciate_it"})),s.default.createElement("div",{className:"text-center"},s.default.createElement("button",{type:"button",className:"btn col-center",onClick:this.onConfirmationClose},s.default.createElement(f.default,{k:"modal_close"})))))}return e}()},{key:"renderFlagOption",value:function(){function e(e,t){var a=this.props.flagOptions,l=a.optionsNative,r=a.optionsDetails,n=l[t],o="Other"===n,i=o?this.onOtherClick:this.onItemClick;return s.default.createElement("div",{className:(0,m.default)("row space-2",{other:o}),key:"option-"+String(n)},s.default.createElement("div",{className:"col-sm-11 col-middle-alt"},s.default.createElement("button",{type:"button",className:(0,m.default)("flag-reasons btn btn-large btn-block",{"space-2":o}),dangerouslySetInnerHTML:{__html:e},"data-reason-id":n,onClick:i})),s.default.createElement("div",{className:(0,m.default)("col-sm-1 col-middle-alt",{"space-2":o})},s.default.createElement(h.default,{content:r[n],accessibilityLabel:c.default.t("flag_widget_what_does_this_reason_mean"),inline:!0})))}return e}()},{key:"renderForm",value:function(){function e(){var e=void 0;return"message"===this.props.flaggableType?e=s.default.createElement(f.default,{k:"report_message_question"}):"listing"===this.props.flaggableType?e=s.default.createElement(f.default,{k:"report_listing_question"}):"user"===this.props.flaggableType?e=s.default.createElement(f.default,{k:"report_user_question"}):"review"===this.props.flaggableType?e=s.default.createElement(f.default,{k:"report_review_question"}):"article"===this.props.flaggableType?e=s.default.createElement(f.default,{k:"report_article_question"}):"article_comment"===this.props.flaggableType&&(e=s.default.createElement(f.default,{k:"report_article_comment_question"})),s.default.createElement("form",{method:"POST",action:this.props.createFlagUrl,className:"new_user_flag"},s.default.createElement("div",{className:"panel-header main-header"},s.default.createElement("button",{className:"modal-close",onClick:this.props.onClose,type:"button",title:c.default.t("modal_close"),"aria-label":c.default.t("modal_close")}),e),s.default.createElement("div",{className:"panel-body flag-form"},s.default.createElement("p",null,s.default.createElement(f.default,{k:"flag_instructions"}),"Â ",s.default.createElement("a",{href:"/help/article/4"},s.default.createElement(f.default,{k:"learn_more",html:!0}))),this.props.flagOptions.options.map(this.renderFlagOption),this.state.showOtherFields&&s.default.createElement("div",{className:"row"},s.default.createElement("label",{className:"screen-reader-only",htmlFor:"flaggable-"+String(this.props.flaggableId)},s.default.createElement(f.default,{k:"please_describe_a_reason"})),s.default.createElement("div",{className:"col-sm-11"},s.default.createElement("textarea",{id:"flaggable-"+String(this.props.flaggableId),className:"space-2",cols:"40",rows:"3",name:"user_flag[other_note]",placeholder:c.default.t("please_describe_a_reason"),ref:"otherReasonTextarea",required:!0})))),this.state.showOtherFields&&s.default.createElement("div",{className:"panel-footer"},s.default.createElement("button",{className:"btn btn-primary btn-large","data-reason-id":"Other",type:"submit",onClick:this.onItemClick},c.default.t("submit"))),s.default.createElement("input",{type:"hidden",name:"user_flag[flaggable_type]",value:this.props.flaggableType}),s.default.createElement("input",{type:"hidden",name:"user_flag[flaggable_id]",value:this.props.flaggableId}),s.default.createElement("input",{type:"hidden",name:"user_flag[name]"}),s.default.createElement("input",{type:"hidden",name:"user_flag[id]",value:this.props.flagId}),s.default.createElement(y.default,null))}return e}()},{key:"render",value:function(){function e(){return s.default.createElement(_.default,{className:"flag-modal",onClose:this.props.onClose,visible:this.props.visible},!this.state.showConfirmation&&this.renderForm(),this.state.showConfirmation&&this.renderConfirmation())}return e}()}]),t}(s.default.Component);N.propTypes=O,N.defaultProps=I,t.default=N}});"object"==typeof module&&(module.exports=e)}();